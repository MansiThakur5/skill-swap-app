
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Screen 6 - Requests</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h2>Your Swap Requests</h2>
    <div id="requestsArea"></div>
  </div>
  <script>
    function renderRequests() {
      const container = document.getElementById("requestsArea");
      const requests = JSON.parse(localStorage.getItem("requests") || "[]");
      container.innerHTML = "";

      if (requests.length === 0) {
        container.innerHTML = "<p>No swap requests yet.</p>";
        return;
      }

      requests.forEach((req, index) => {
        const div = document.createElement("div");
        div.className = "request";
        let buttons = "";
        if (req.status === "Pending") {
          buttons = \`
            <button onclick="updateStatus(\${index}, 'Accepted')">Accept</button>
            <button onclick="updateStatus(\${index}, 'Rejected')">Reject</button>
          \`;
        }
        div.innerHTML = \`
          <p><strong>\${req.to}</strong> requested: You teach <em>\${req.offered}</em> in exchange for <em>\${req.wanted}</em></p>
          <p><strong>Message:</strong> \${req.message}</p>
          \${buttons}
          <span class="status \${req.status}">\${req.status}</span>
        \`;
        container.appendChild(div);
      });
    }

    function updateStatus(index, status) {
      const requests = JSON.parse(localStorage.getItem("requests") || "[]");
      requests[index].status = status;
      localStorage.setItem("requests", JSON.stringify(requests));
      renderRequests();
    }

    window.onload = renderRequests;
  </script>
</body>
</html>
